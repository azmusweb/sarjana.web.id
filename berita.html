<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Halaman Berita" />
  <title>Berita - Sarjana</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

<header>
  <a id="branding" href="index.html">
    <img id="site-logo" src="" alt="Logo" style="display:none" />
    <span id="site-name"></span>
  </a>
  <nav id="main-nav">
    <!-- Menu akan otomatis terisi oleh script.js -->
  </nav>
</header>

<section class="headline-wrapper">
  <div id="headline-marquee"></div>
</section>

<section id="posts">
  <!-- Isi berita detail akan dimuat oleh script.js -->
  <article class="post-item">
    <h2 id="news-title">Loading...</h2>
    <img id="news-image" src="" alt="" style="max-width: 100%; height: auto; margin-top: 10px; display:none" />
    <p id="news-content"></p>
  </article>
</section>

<section class="home-widgets">
  <div class="widget-column" id="left-widgets"></div>
  <div class="widget-column" id="right-widgets"></div>
</section>

<section class="widget-blue-section">
  <div class="widget-box blue" id="widget-blue-1"></div>
  <div class="widget-box blue" id="widget-blue-2"></div>
  <div class="widget-box blue" id="widget-blue-3"></div>
</section>

<script src="script.js"></script>
<script>
  const SPREADSHEET_ID = '1oMHeKOF2_D6deuV8T1l10_GB0wgsPGLV7WrPcJ6Qxww';
  const API_KEY = 'AIzaSyCaI7qUmiyzqkZG6KLDifcfMGQ_jqcWyxs';

  function getSlug() {
    const params = new URLSearchParams(window.location.search);
    return params.get('slug') || '';
  }

  async function loadBeritaDetail() {
    try {
      const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/Live Website?key=${API_KEY}`);
      const json = await response.json();
      const rows = json.values.slice(1);
      const slug = getSlug();
      const berita = rows.find(row => row[4] === slug);

      if (berita) {
        document.getElementById('news-title').textContent = berita[0] || 'Judul kosong';
        if (berita[2]) {
          const img = document.getElementById('news-image');
          img.src = berita[2];
          img.style.display = 'block';
          img.alt = berita[0] || 'Gambar berita';
        }
        document.getElementById('news-content').innerHTML = berita[3] || 'Isi berita kosong';
      } else {
        document.getElementById('news-title').textContent = 'Berita tidak ditemukan';
      }
    } catch (error) {
      console.error(error);
      document.getElementById('news-title').textContent = 'Terjadi kesalahan saat memuat berita';
    }
  }

  window.onload = loadBeritaDetail;
</script>

</body>
</html>
