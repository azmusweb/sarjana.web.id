<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Detail Berita</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>Sarjana News</h1>
    <nav>
      <a href="index.html">Beranda</a>
    </nav>
  </header>

  <div class="container" id="konten-berita"></div>

  <footer>Â© 2025 Sarjana News</footer>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const slugParam = urlParams.get('slug');

    const spreadsheetId = '1oMHeKOF2_D6deuV8T1l10_GB0wgsPGLV7WrPcJ6Qxww';
    const sheetName = 'Live Website';
    const apiKey = 'AIzaSyCaI7qUmiyzqkZG6KLDifcfMGQ_jqcWyxs';

    const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${sheetName}?alt=json&key=${apiKey}`;

    fetch(url)
      .then(res => res.json())
      .then(data => {
        const rows = data.values;
        const headers = rows[0];
        const beritaList = rows.slice(1);
        const konten = document.getElementById('konten-berita');

        const berita = beritaList.find(row => {
          const indexSlug = headers.indexOf('Slug');
          return row[indexSlug] === slugParam;
        });

        if (!berita) {
          konten.innerHTML = '<p>Berita tidak ditemukan.</p>';
          return;
        }

        const dataBerita = {};
        headers.forEach((h, i) => dataBerita[h] = berita[i]);

        konten.innerHTML = `
          <img src="${dataBerita['Gambar']}" alt="${dataBerita['Judul']}" />
          <h2>${dataBerita['Judul']}</h2>
          <div class="meta">${dataBerita['Tanggal']} - ${dataBerita['Label']}</div>
          <div class="body">${dataBerita['Body']}</div>
        `;
      });
  </script>
</body>
</html>
